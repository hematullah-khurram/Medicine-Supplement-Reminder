<!doctype html>
<html lang="en" class="h-full">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title><%= typeof title !== 'undefined' ? title + ' | ' : '' %>Medicine Reminder</title>

  <!-- Inter font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: { sans: ['Inter', 'ui-sans-serif', 'system-ui'] },
          colors: {
            brand: {
              50:'#eef7ff', 100:'#d9edff', 200:'#b3daff', 300:'#85c1ff',
              400:'#5aa5ff', 500:'#3d86ff', 600:'#2f69e0', 700:'#254fb3',
              800:'#1f418f', 900:'#1b3877'
            },
            mint: {
              50:'#ecfdf5',100:'#d1fae5',200:'#a7f3d0',300:'#6ee7b7',
              400:'#34d399',500:'#10b981',600:'#059669',700:'#047857',
              800:'#065f46',900:'#064e3b'
            }
          }
        }
      }
    }
  </script>

  <!-- Your custom CSS -->
  <link rel="stylesheet" href="/css/style.css">
</head>
<body class="min-h-full bg-gradient-to-b from-brand-50 to-white text-slate-800">
  <!-- Top nav -->
  <header class="bg-gradient-to-r from-brand-600 via-brand-500 to-mint-500 text-white shadow">
    <nav class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <a href="/" class="font-extrabold tracking-wide text-xl">ðŸ’Š Med Reminder</a>
      <ul class="flex gap-3 items-center">
        <% if (!currentUser) { %>
          <li><a href="/register" class="px-3 py-2 rounded-lg hover:bg-white/10">Register</a></li>
          <li><a href="/login" class="px-3 py-2 rounded-lg bg-white/10 hover:bg-white/20">Login</a></li>
        <% } else { %>
          <li><a href="/reminders" class="px-3 py-2 rounded-lg hover:bg-white/10">My Reminders</a></li>
          <li class="hidden sm:block text-white/80">Hi, <span class="font-semibold"><%= currentUser.username %></span></li>
          <li>
            <form action="/logout" method="POST">
              <button class="px-3 py-2 rounded-lg bg-white text-brand-700 font-semibold hover:opacity-90">Logout</button>
            </form>
          </li>
        <% } %>
      </ul>
    </nav>
  </header>

  <!-- Page container -->
  <main class="max-w-6xl mx-auto px-4 py-6 space-y-6">
    <%- include('../partials/flash') %>
    <%- body %>

    <% if (currentUser) { %>
      <!-- Show demo reminder cards ONLY when logged in -->
      <section class="grid sm:grid-cols-2 lg:grid-cols-3 gap-6 mt-6">
        <div class="card glass fade-in">
          <h2 class="heading">ðŸ’Š Morning Medicine</h2>
          <p class="subheading">Take 1 pill after breakfast</p>
          <button class="btn-primary mt-3 mark-btn">Mark as Taken</button>
        </div>

        <div class="card glass fade-in delay-100">
          <h2 class="heading">ðŸŒ¿ Vitamin C</h2>
          <p class="subheading">One tablet with water</p>
          <button class="btn-primary mt-3 mark-btn">Mark as Taken</button>
        </div>

        <div class="card glass fade-in delay-200">
          <h2 class="heading">ðŸ’¤ Night Supplement</h2>
          <p class="subheading">Magnesium before sleep</p>
          <button class="btn-primary mt-3 mark-btn">Mark as Taken</button>
        </div>
      </section>
    <% } %>
  </main>

  <!-- Footer -->
  <footer class="border-t bg-white/70 backdrop-blur mt-10">
    <div class="max-w-6xl mx-auto px-4 py-6 text-sm text-slate-600 flex items-center justify-between">
      <span>Medicine & Supplement Reminder</span>
      <a class="underline hover:text-brand-700" href="/assets/Medicine_Supplement_Reminder_TwoPages.pdf" target="_blank">Project Plan PDF</a>
    </div>
  </footer>

  <!-- JS: make "Mark as Taken" work -->
  <script>
    document.querySelectorAll(".mark-btn").forEach(btn => {
      btn.addEventListener("click", () => {
        btn.classList.add("taken");
        btn.innerText = "âœ… Taken";
        btn.disabled = true;
      });
    });
  </script>
  <script src="/js/notifications.js"></script>
</body>
</html>
